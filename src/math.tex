%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Contents: Math typesetting with LaTeX
% $Id$
%
% Changes by Stefan M. Moser: 2008/10/22
%
% -Section 2: "Single Equations": added comment about preference of
%  equation* over \[
% -Replaced (almost) all examples with \[ by equation*
% -New section 4: "Single Equations that are Too Long: multline"
% -New section 5: "Multiple Equations"
% -Section 6: "Arrays and Matrices": made a full section and added
%  some material
% -Section 9: "Theorems, Lemmas, ...": added a subsection about proofs
%  with new material
%
% Other Changes:
% -in lshort.sty: 
%    *example environment adapted: changed in three places
%     \textwidth by \linewidth. This is necessary for
%     example-environment within a itemize-list.
%    *added \RequirePackage[retainorgcmds]{IEEEtrantools}
%
% THINGS TO DO:
% -adapt typesetting of new sections to rest of lshort, including all
%  the usual commands used so far. In particular, I guess we have to
%  get rid of the \verb-commands everywhere
% -include index-commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% Pour les informations de licence, voir contrib.tex.
% See contrib.tex for license information.

\chapter{Formules Mathématiques}
\thispagestyle{plain}

\begin{intro}
  Vous êtes prêts ! Dans ce chapitre nous allons aborder l'atout
  majeur de \TeX{} : la composition de formules mathématiques.
  Mais attention, ce chapitre ne fait que décrire les commandes de
  base. Bien que ce qui est expliqué ici soit suffisant pour la
  majorité des utilisateurs, ne désespérez pas si vous n'y trouvez pas
  la solution à votre problème de mise en forme d'une équation
  mathématique. Il y a de fortes chances pour que la solution se
  trouve dans l'extension \pai{amsmath} de \AmS-\LaTeX{}.% 
\end{intro}
  
\section{L'ensemble \texorpdfstring{\AmS}{AMS}-\LaTeX{}}

Si vous souhaitez saisir des textes \wi{mathématiques} (avancés), vous
devriez utiliser \AmS-\LaTeX{}. Le paquet \AmS-\LaTeX{} est une
collection d'extensions et de classes pour la saisie
mathématique. Nous traiterons ici principalement de l'extension
\pai{amsmath} qui fait partie de ce paquet. \AmS-\LaTeX{} est produit
par l'\emph{American Mathematical Society}\footnote{la Société
  américaine de mathématiques. \NdT} et est utilisée extensivement pour la
mise en forme de mathématiques. \LaTeX{} seul fournit bien quelques
fonctionnalités et environnements basiques, mais ils sont
relativement limités (voire, la logique s'appliquerait plutôt dans
l'autre sens : \AmS-\LaTeX{} est \emph{illimité} !) et parfois
incohérents.

\AmS-\LaTeX{} fait partie de la distribution de base et est fournie
avec toutes les distributions récentes de \LaTeX{}\footnote{Si la
  vôtre ne l'a pas, visitez
  \CTAN|pkg/amslatex|}. Dans ce chapitre nous
  supposerons qu'\pai{amsmath} est chargé en préambule, via
  {\ci{usepackage}\{amsmath\}}.

\section{Équations simples}

Une \wi{formule} mathématique peut être mise en forme
au fil du texte à l'intérieur d'un paragraphe
(\emph{\wi{style en-ligne}}) ou en interrompant le flot du texte pour
que la mise en forme soit séparée (\textit{\wi{style hors-texte}}). Les
\wi{équation}s mathématiques \emph{dans} un paragraphe sont entrées
entre deux signes \index{$\iffalse$\fi @\texttt{\$}} \texttt{\$} :
\begin{example}
Ajoutez $a$ au carré 
et $b$ au carré pour obtenir
$c$ au carré. Ou, en 
utilisant une approche plus
matheuse : $a^2 + b^2 = c^2$.
\end{example}
\begin{example}
 \TeX{} se prononce 
$\tau\epsilon\chi$\\[5pt]
100~m$^{3}$ d'eau\\[5pt]
J'$\heartsuit$ \LaTeX{}
\end{example}

Il vaut mieux composer les équations ou les formules plus importantes
\og \emph{hors-texte} \fg{}, c'est-à-dire sur une ligne à part, plutôt que
d'amocher le paragraphe.  Pour cela, on les
place entre \verb|\begin{|\ei{equation}\verb|}| et
\verb|\end{equation}|.
Vous pouvez ensuite utiliser \ci{label} pour marquer un numéro
d'équation et vous y référer ailleurs dans le texte via la commande
\ci{eqref}. Si vous voulez plutôt nommer l'équation, utiliser \ci{tag}
à la place.

\begin{example}
Ajoutez $a$ au carré 
et $b$ au carré pour obtenir
$c$ au carré. Ou, en 
utilisant une approche plus
matheuse :
 \begin{equation}
   a^2 + b^2 = c^2
 \end{equation}
Einstein a dit
 \begin{equation}
   E = mc^2 \label{intelligent}
 \end{equation}
Il n'a pas dit
 \begin{equation}
  1 + 1 = 3 \tag{idiot}
 \end{equation}
Voici une référence à
\eqref{intelligent}.
\end{example}

Si vous ne voulez pas que \LaTeX{} numérote vos équations, utilisez la
version étoilée d'\texttt{equation}, \ei{equation*}\footnote{Fournie par
  \package{amsmath}. Si vous ne l'avez pas chargé, vous pouvez utiliser
  l'environnement \ei{displaymath} de \LaTeX{}. Mais il vaut mieux toujours
  charger \package{amsmath}, \LaTeX{} seul n'ayant que la version
  non-étoilée d'\texttt{equation}.}, ou mieux encore,
entourez votre équation par \ci{[} et \ci{]} :
\begin{example}
Ajoutez $a$ au carré 
et $b$ au carré pour obtenir
$c$ au carré. Ou, en 
utilisant une approche plus
matheuse :
\begin{equation*}
  a^2 + b^2 = c^2
\end{equation*}
ou de façon plus condensée :
\[ a^2 + b^2 = c^2 \]
\end{example}

Cependant, si vous avez beaucoup d'équations dans votre document, le source
\LaTeX{} risque de devenir moins lisible si vous utilisez \ci{[\iffalse]\fi}
et \ci{\iffalse[\fi]}, à moins de les laisser seuls sur une
ligne. Aussi nous recommandons d'utiliser plutôt \ei{equation} et
\ei{equation*} pour lesquels il est plus facile d'activer ou
désactiver la numérotation par simple ajout ou retrait des étoiles.

Remarquez que les expressions mathématiques sont formatées
différemment selon qu'elles sont composées \og \wi{en-ligne} \fg{} ou \og
\wi{hors-texte} \fg{} :
 \begin{example}
Style en-ligne :
$\lim_{n \to \infty} 
\sum_{k=1}^n \frac{1}{k^2} 
= \frac{\pi^2}{6}$.
Style hors-texte :
\begin{equation}
  \lim_{n \to \infty} 
  \sum_{k=1}^n \frac{1}{k^2} 
  = \frac{\pi^2}{6}
\end{equation}
\end{example}

En style en-ligne, utilisez la commande \ci{smash} sur des
(sous-)expressions mathématiques à plusieurs niveaux, que ce soit vers
le haut ou vers le bas. Cela incite \LaTeX{} à ne pas prendre en
compte la hauteur de ces expressions et permet d'avoir un interligne
régulier.

\begin{example}
Une expression mathématique
$d_{e_{e_p}}$ suivie par une
expression $h^{i^{g^h}}$. Par
opposition à une expression
avec smash \smash{$d_{e_{e_p}}$}
suivie par une expression
\smash{$h^{i^{g^h}}$}.
\end{example}


\subsection{Mode mathématique}


Il y a également des différences notables entre le \wi{mode
  \emph{mathématique}} et le mode \emph{texte}. Par exemple, en mode
\emph{mathématique} :

\begin{enumerate}
\item \index{espacement!mathématique}
      la plupart des espaces et des retours à la ligne n'ont aucune
      signification. Les espaces sont déduites de la logique de la
      formule ou indiquées à l'aide de commandes spécifiques telles
      que \ci{,}, \ci{quad} ou\ci{qquad} (nous reparlerons de cela en
      section~\ref{sec:math-spacing}) ;
\item les lignes vides ne sont pas autorisées. Un seul paragraphe par
      formule~;
\item chaque lettre est considérée comme étant le nom d'une variable
      et sera imprimée comme telle. Pour insérer du  texte
      normal (police et espacement standard) dans une formule, il 
      faut utiliser la commande \verb|\text{...}| (voir également la
      section \ref{sec:fontsz} en page \pageref{sec:fontsz}).
\end{enumerate}

\begin{example}
$\forall x \in \mathbf{R}:
 \qquad x^{2} \geq 0$
\end{example}
\begin{example}
$x^{2} \geq 0\qquad
\text{pour tout } x\in\mathbf{R}$
\end{example}

Une mode récente et contestable pousse à utiliser la police 
\eng{\wi{blackboard bold}} (gras tableau noir, ainsi appelée car c'est par
le doublement des verticales des lettres que l'on simule le gras
typographique lorsqu'on ne peut faire autrement) qui est obtenue par
la commande \ci{mathbb} de l'extension \pai{amssymb}
\footnote{\pai{amssymb} ne fait pas partie du paquet \AmS-\LaTeX{},
  mais fait peut-être partie de votre distribution \LaTeX{}. Vérifiez
  celle-ci ou visitez \texttt{CTAN:/fonts/amsfonts/latex/} pour
  l'obtenir.}
pour désigner les ensembles de nombres entiers, réels, etc.
\ifx\mathbb\undefined\else
L'exemple précédent devient :
\begin{example}
$x^{2} \geq 0\qquad
 \text{pour tout } x 
 \in \mathbb{R}$
\end{example}
\fi

Référez-vous aux tableaux \ref{mathalpha} en page \pageref{mathalpha}
et \ref{mathfonts} en page \pageref{mathfonts} pour plus de polices
mathématiques.


\section{Éléments d'une formule mathématique}


Cette section décrit les commandes les plus importantes 
du mode mathématique. La plupart des commandes de cette section ne
nécessitent pas \textsf{amsmath}, sauf mention explicite, mais
chargez-la tout de même.


\index{grec!alphabet}
Les lettres \textbf{grecques minuscules} sont saisies de la manière
suivante :
\verb|\alpha|, \verb|\beta|, \verb|\gamma|, etc. Les lettres
\textbf{grecques majuscules} sont quant à elles saisies ainsi :
\verb|\Gamma|, \verb|\Delta|, etc.
\footnote{Il n'y a pas de Alpha, Beta\ldots{} majuscule dans \LaTeXe{}
parce que c'est le même caractère que le A,B\ldots{} romain.} sont saisies

Référez-vous au tableau~\ref{greekletters} en
page~\pageref{greekletters} pour une liste de lettres grecques.
\begin{example}
$\lambda,\xi,\pi,\theta,
 \mu,\Phi,\Omega,\Delta$
\end{example}
 

Les \textbf{indices, exposants et lettres supérieures}
sont\index{indice}\index{exposant}\index{lettre supérieure}
positionnés en utilisant les caractères
\verb|_|\index{_@\verb"|_"|} et \verb|^|\index{^@\verb"|^"|}.

Le tableau~\ref{binaryrel} en page \pageref{binaryrel}  liste de
nombreuses relations binaires comme $\subseteq$ et $\perp$.

La plupart des commandes du mode mathématique ne s'appliquent qu'au
caractère suivant. Pour qu'une commande s'applique à un ensemble de
caractères, il faut les grouper en utilisant des accolades :
\verb|{...}|. 

\begin{example}
$p^3_{ij} \qquad 
 m_\text{Knuth}\qquad
\sum_{k=1}^3 k \\[5pt]
 a^x+y \neq a^{x+y}\qquad 
 e^{x^2} \neq {e^x}^2$
\end{example}

La \textbf{\wi{racine carrée}} est saisie via \ci{sqrt}. La
racine $n$-ième est produite par la commande
\verb|\sqrt[|$n$\verb|]|. La taille du symbole racine est calculée par
\LaTeX. Pour obtenir le symbole seul, utilisez \verb|\surd|.

Voyez d'autres sortes de flèches comme $\hookrightarrow$ et
$\rightleftharpoons$ dans le tableau~\ref{tab:arrows} en page
\pageref{tab:arrows}.
\begin{example}
$\sqrt{x} = x^{1/2}
 \quad \sqrt[3]{2}
 \quad \sqrt{x^{2} + \sqrt{y}}
 \quad \surd[x^2 + y^2]$
\end{example}


\index{points de suspension!verticaux}
\index{vertical!points de suspension}
\index{points de suspension!diagonaux}
Bien que les \textbf{\wi{point}s} pour indiquer les opérations de
multiplication soient normalemet omis, les faire apparaître peut aider à
la lecture. Utilisez
alors \ci{cdot} qui imprime un seul point centré. \ci{cdots} imprime
des \textbf{\wi{points de suspension}} centrés (à la manière de points
de suspension situés plus haut sur la ligne). \ci{ldots} imprime des
points de suspension normaux. En plus de ces commandes vous avez
également \ci{vdots} pour des points alignés verticalement et
\ci{ddots} qui imprime des \wi{points en diagonale}. D'autres exemples
se trouvent en section~\ref{sec:arraymat}.
\begin{example}
$\Psi = v_1 \cdot v_2
 \cdot \ldots \qquad 
 n! = 1 \cdot 2 
 \cdots (n-1) \cdot n$
\end{example}

Les commandes \ci{overline} et \ci{underline} créent un \textbf{trait
horizontal} au-dessus ou au-dessous d'une expression :
\index{horizontal!trait}
\index{trait!horizontal}
\begin{example}
$0.\overline{3} = 
 \underline{\underline{1/3}}$
\end{example}

Les commandes \ci{overbrace} et \ci{underbrace} créent une grande
\textbf{accolade horizontale} au-dessus ou au-dessous d'une
expression :
\index{horizontal!accolade}
\index{accolade!horizontale}
\begin{example}
$\underbrace{\overbrace{a+b+c}^6 
 \cdot \overbrace{d+e+f}^7}
 _{\text{meaning of life}} = 42$
\end{example}

\index{mathématiques!accents}
Pour ajouter des accents mathématiques tels que des \textbf{flèches}
ou des \textbf{\wi{tilde}s}, vous pouvez utiliser les commandes du
tableau~\ref{mathacc} p.~\pageref{mathacc}.  Les chapeaux et les
tildes larges, couvrant plusieurs caractères, sont produits par les
commandes \ci{widetilde} et \ci{widehat}. Notez bien la différence
entre \ci{hat} et \ci{widehat} ainsi que le placement de \ci{bar} pour
une variable indicée. La commande \verb|'|\index{'@\verb"|'"|} produit
un \wi{prime} :
% a dash is --
\begin{example}
$f(x) = x^2 \qquad f'(x) 
 = 2x \qquad f''(x) = 2\\[5pt]
 \hat{XY} \quad \widehat{XY}
 \quad \bar{x_0} \quad \bar{x}_0$
\end{example}


Les \textbf{\wi{vecteurs}} sont en général marqués en ajoutant une
flèche au-dessus des noms de variables. Ceci est obtenu par la
commande \ci{vec}. Pour coder le vecteur de $A$ à $B$, les commandes
\ci{overrightarrow} et \ci{overleftarrow} sont bien utiles :
\begin{example}
$\vec{a} \qquad
 \vec{AB} \qquad
 \overrightarrow{AB}$
\end{example}

Les noms des fonctions doivent souvent être imprimés à l'aide
d'une police droite et non en italique comme les variables. C'est
pourquoi \LaTeX{} fournit les commandes suivantes pour les fonctions
les plus utilisées :
\index{mathématiques!fonctions}

\begin{tabular}{llllll}
\ci{arccos} &  \ci{cos}  &  \ci{csc} &  \ci{exp} &  \ci{ker}    & \ci{limsup} \\
\ci{arcsin} &  \ci{cosh} &  \ci{deg} &  \ci{gcd} &  \ci{lg}     & \ci{ln}     \\
\ci{arctan} &  \ci{cot}  &  \ci{det} &  \ci{hom} &  \ci{lim}    & \ci{log}    \\
\ci{arg}    &  \ci{coth} &  \ci{dim} &  \ci{inf} &  \ci{liminf} & \ci{max}    \\
\ci{sinh}   & \ci{sup}   &  \ci{tan}  & \ci{tanh}&  \ci{min}    & \ci{Pr}     \\
\ci{sec}    & \ci{sin} \\
\end{tabular}

\begin{example}
\begin{equation*}
  \lim_{x \rightarrow 0}
  \frac{\sin x}{x}=1
\end{equation*}
\end{example}

Les fonctions n'apparaissant pas dans la liste peuvent être déclarées
avec \ci{DeclareMathOperator}. Il y a même une version étoilée pour
les fonctions avec des indices ou exposants placés en dessous et en
dessus\footnote{Parfois appelés \emph{limites}. \NdT}. Cette commande ne peut
être utilisée
qu'en préambule, aussi les lignes commentées de l'exemple doivent être
ajoutées en préambule pour fonctionner.

\begin{example}
%\DeclareMathOperator{\argh}{argh}
%\DeclareMathOperator*{\Nut}{Nut}
\begin{equation*}
  3\argh = 2\Nut_{x=1}
\end{equation*}
\end{example}

Pour la fonction \wi{modulo}, il y a deux commandes possibles : 
\ci{bmod} pour l'opérateur binaire et 
\ci{pmod} pour l'opérateur unaire :
\begin{example}
$a\bmod b \\
 x\equiv a \pmod{b}$
\end{example}

Une \textbf{\wi{fraction}} est produite avec
\ci{frac}\verb|{|\emph{numérateur}\verb|}{|\emph{dénominateur}\verb|}|. Pour
les équations en-ligne, la fraction est réduite pour tenir sur la
ligne. Ce style peut aussi s'obtenir hors-texte avec
\ci{tfrac}. L'inverse, c'est-à-dire obtenir des fractions en-ligne
selon le style hors-texte, est obtenu avec \ci{dfrac}.  La forme
utilisant une barre oblique ($1/2$) est souvent préférable pour des
petits éléments.
\begin{example}
En style hors-texte :
\begin{equation*}
  3/8 \qquad \frac{3}{8}
  \qquad \tfrac{3}{8}
\end{equation*}
\end{example}

\begin{example}
En style en-ligne :
$1\frac{1}{2}$~heures \\
ou bien $1\dfrac{1}{2}$~heures
\end{example}

Ici nous utilisons la commande \ci{partial} utilisée habituellement
pour une \wi{dérivée partielle} :
\begin{example}
\begin{equation*}
  \sqrt{\frac{x^2}{k+1}}\qquad
  x^\frac{2}{k+1}\qquad
  \frac{\partial^2f}
  {\partial x^2}
\end{equation*}
\end{example}

Pour imprimer des coefficients binomiaux (à l'américaine) ou d'autres
structures semblables, utilisez la commande \ci{binom} d'\pai{amsmath} :
%SC: maybe not the right translation for Pascal's rule
\begin{example}
La règle de Pascal est
\begin{equation*}
 \binom{n}{k} =\binom{n-1}{k}
 + \binom{n-1}{k-1}
\end{equation*}
\end{example}
 
Il est parfois utile, notamment pour des \wi{relations binaires}, de
pouvoir superposer des symboles.  La commande
\ci{stackrel}\verb|{#1}{#2}| place l'argument \verb|#1| en taille
réduite au-dessus de l'argument \verb|#2|, lui-même mis en position
normale :
\begin{example}
\begin{equation*}
 f_n(x) \stackrel{*}{\approx} 1
\end{equation*}
\end{example}

Les \textbf{\wi{intégrale}s} sont produites par la commande \ci{int},
les \textbf{\wi{somme}s} par la commande \ci{sum} et les produits par la
commande \ci{prod}. Les limites
inférieures et supérieures sont indiquées avec~\verb|_| et~\verb|^|
comme pour les indices et les exposants :
\begin{example}
\begin{equation*}
\sum_{i=1}^n \qquad
\int_0^{\frac{\pi}{2}} \qquad
\prod_\epsilon
\end{equation*}
\end{example}

Pour superposer des indices, l'extension \pai{amsmath} propose la
commande \ci{substack} :
\begin{example}
\begin{equation*}
\sum^n_{\substack{0<i<n \\ 
        j\subseteq i}}
   P(i,j) = Q(i,j)
\end{equation*}
\end{example}

\LaTeX{} fournit toutes sortes de symboles pour les
\textbf{\wi{crochets} et autres \wi{délimiteurs}} (par exemple
$[\;\langle\;\|\;\updownarrow$). Les \wi{parenthèses} et les crochets
sont obtenus avec les caractères correspondants, les \wi{accolades}
avec \verb|\{|, mais les autres délimiteurs ne sont obtenus que par des
commandes spéciales (par exemple \verb|\updownarrow|) :
\begin{example}
\begin{equation*}
{a,b,c} \neq \{a,b,c\}
\end{equation*}
\end{example}

Si vous ajoutez \ci{left} avant un délimiteur ouvrant et
\vadjust{\pagebreak[3]}%MPG: avoid underfull vbox next page
\ci{right} avant le délimiteur fermant correspondant, \LaTeX{} détermine
automatiquement la taille appropriée pour ces symboles. Remarquez
qu'il est nécessaire de fermer chaque délimiteur ouvrant
(\ci{left}) avec un délimiteur fermant (\ci{right}). Si vous
ne voulez pas de délimiteur fermant, utilisez le délimiteur invisible
\og \ci{right.} \fg{} :
\begin{example}
\begin{equation*}
1 + \left(\frac{1}{1-x^{2}}
    \right)^3 \qquad 
\left. \ddagger \frac{~}{~}\right)
\end{equation*}
\end{example}

Dans certains cas, il est nécessaire d'indiquer la taille exacte des
délimiteurs mathématiques à la main. Vous pouvez alors utiliser les
commandes \ci{big}, \ci{Big}, \ci{bigg} et \ci{Bigg} comme préfixes
des commandes qui impriment les délimiteurs :
\begin{example}
$\Big((x+1)(x-1)\Big)^{2}$\\
$\big( \Big( \bigg( \Bigg( \quad
\big\} \Big\} \bigg\} \Bigg\}\quad
\big\| \Big\| \bigg\| \Bigg\|\quad
\big\Downarrow \Big\Downarrow 
\bigg\Downarrow \Bigg\Downarrow$
\end{example}

Pour une liste de tous les délimiteurs disponibles, reportez-vous au
tableau~\ref{tab:delimiters}, page~\pageref{tab:delimiters}.


\section{Formules trop longues : \ei{multline}}
\label{sec:multline}
\index{equation@équation!trop longue}

%SC: I also liked the points raised in "How to write a long formula"
%by Leslie Lamport, although I suspect it applies better to logic than
%other fields of mathematics.

Si une équation est trop longue, il faut trouver un moyen de la répartir sur
plusieurs lignes. Malheureusement, l'équation a alors tendance à devenir moins
lisible. Pour préserver la lisibilité, voici quelques règles sur la façon de
découper les équations.
\begin{enumerate}
  \item En général, une équation devrait toujours être coupée \emph{avant} un
    signe d'égalité ou un opérateur.
  \item Une coupure devant un signe d'égalité est préférable à une coupure
    devant un opérateur.
  \item Une coupure devant un signe \og plus \fg ou moins est préférable à une
    coupure devant un signe de multiplication.
  \item Il faut éviter autant que possible les coupures à tous les autres
    endroits.
\end{enumerate}
La façon la plus simple pour réaliser un tel découpage est d'utiliser
l'environnement \ei{multline}\footnote{Fourni par \package{amsmath}.}.
\begin{example}
\begin{multline}
  a + b + c + d + e + f 
  + g + h + i  
  \\
  = j + k + l + m + n 
\end{multline}
\end{example}
\noindent
La différence avec l'environnement \ei{equation} est qu'il est possible
d'insérer un saut de ligne où l'on veut (voire plusieurs), en utilisant
\verb+\\+ là où l'équation doit être coupée. Comme pour \ei{equation*}, il
existe un environnement \ei{multline*} qui supprime la numérotation.

Souvent le résultat sera
meilleur avec l'environnement \ei{IEEEeqnarray} (voir
section~\ref{sec:IEEEeqnarray}). Par exemple, considérons la situation
suivante.
\begin{example}
\begin{equation}
  a = b + c + d + e + f 
  + g + h + i + j 
  + k + l + m + n + o + p  
  \label{eq:formule_trop_longue}
\end{equation}
\end{example}
\noindent
Ici, c'est en fait le membre de droite qui est trop long pour tenir sur une
ligne. L'usage de \ei{multline} produit alors :
\begin{example}
\begin{multline}
  a = b + c + d + e + f 
  + g + h + i + j \\
  + k + l + m + n + o + p
\end{multline}
\end{example}

C'est nettement mieux que \eqref{eq:formule_trop_longue}, mais
l'inconvénient est que le signe d'égalité perd son importance naturelle, en
principe supérieure à celle du signe \og plus \fg devant $k$. Une meilleure
solution est d'utiliser \ei{IEEEeqnarray}, qui sera présenté en détails en
section~\ref{sec:IEEEeqnarray}.


\section{Formules multiples}
\label{sec:IEEEeqnarray}
\index{equation@équation!multiple}

Dans le cas le plus général, considérons une suite d'équations qui ne tiennent
pas en entier sur une ligne. Il s'agit d'ajuster l'alignement vertical de
façon à obtenir une structure lisible et agréable à l'\oe il pour l'ensemble.

Avant les conseils pour obtenir ce résultat, commençons par quelques mauvais
exemples qui montrent les principaux inconvénients de certaines solutions
courantes.

\subsection{Problèmes des commandes traditionnelles}
\label{sec:problems_traditional}

Pour grouper ensemble plusieurs équations, on peut utiliser
l'environnement \ei{align}\footnote{L'environnement \texttt{align} peut aussi
  servir à placer plusieurs groupes d'équations côte à côte. Un autre excellent
  cas d'utilisation de l'environnement \ei{IEEEeqnarray}, avec un
  argument comme
  \texttt{\{rCl+rCl\}}.} comme ceci :
\begin{example}
 \begin{align}
  a & = b + c \\
  & = d + e
 \end{align}
\end{example}

Cette approche pose problème dès qu'une ligne est trop longue.
\begin{example}
\begin{align}
  a & = b + c \\
  & = d + e + f + g + h + i 
  + j + k + l \nonumber \\
  & + m + n + o \\
  & = p + q + r + s
\end{align}
\end{example}
\noindent
Ici, on voudrait que $+\: m$ soit placé exactement sous le $d$ et non sous le
signe d'égalité. Un \TeX{}pert suggèrera que la commande
\verb+\mathrel{\phantom{=}} \negmedspace {}+ ajouterait l'espace
requis devant \verb|+m+n+o|, mais étant donné que nombre
d'utilisateurs n'ont pas ce genre de maîtrise, une solution plus
simple serait la bienvenue.

C'est donc le moment idéal pour introduire l'environnement
\ei{eqnarray}~:
\begin{example}
\begin{eqnarray}
  a & = & b + c \\
  & = & d + e + f + g + h + i 
  + j + k + l \nonumber \\
  && +\: m + n + o \\
  & = & p + q + r + s
\end{eqnarray}
\end{example}

C'est mieux mais toujours pas une solution optimale~: les
espaces autour du signe d'égalité sont trop grands. En particulier, ce
ne sont pas les mêmes qu'avec les environnements \ei{multline} ou
\ei{equation} :
\begin{example}
\begin{eqnarray}
  a & = & a = a
\end{eqnarray}
\end{example}

\noindent \dots De plus, la formule et le numéro d'équation peuvent se
chevaucher, même quand il y a suffisamment de place à gauche pour
pousser la formule :
\begin{example}
\begin{eqnarray}
  a & = & b + c 
  \\
  & = & d + e + f + g + h^2 
  + i^2 + j 
  \label{eq:eqnarrayfautif}
\end{eqnarray}
\end{example}

\noindent Alors que l'environnement propose une commande \ci{lefteqn}
qui peut être utilisée quand le membre de gauche est trop long.
\begin{example}
\begin{eqnarray}
  \lefteqn{a + b + c + d 
    + e + f + g + h}\nonumber\\
  & = & i + j + k + l + m 
  \\
  & = & n + o + p + q + r + s
\end{eqnarray}
\end{example}
\noindent Ça n'est toujours pas optimal étant donné que le membre de droite
est trop court et l'ensemble n'est pas centré correctement :
\begin{example}
\begin{eqnarray}
  \lefteqn{a + b + c + d 
    + e + f + g + h} 
  \nonumber \\
  & = & i + j 
\end{eqnarray}
\end{example}

\noindent Après avoir suffisamment dénigré la compétition, nous
pouvons nous diriger vers le glorieux\ldots

\subsection{L'environnement IEEEeqnarray}
\label{sec:IEEEeqnarray_intro}

L'environnement \ei{IEEEeqnarray} est très puissant et offre beaucoup
d'options. Nous n'en couvrirons ici que les fonctionnalités de base. Pour plus
d'information, référez-vous à son manuel\footnote{Le manuel officiel
  s'appelle \CTAN|macros/latex/contrib/IEEEtran/IEEEtran_HOWTO.pdf| ; la partie sur \texttt{IEEEeqnarray}
  se trouve dans l'appendice~F.}.

Pour commencer, il faut charger l'extension\footnote{L'extension
  \pai{IEEEtrantools} peut ne pas être présente dans votre
  installation, vous pourrez alors la trouver sur le CTAN.}
\pai{IEEEtrantools} afin de pouvoir utiliser \ei{IEEEeqnarray}. Pour
cela, ajoutez la ligne suivante à votre préambule.  \small
\begin{verbatim}
\usepackage{IEEEtrantools}
\end{verbatim}
\normalsize

Ce qui fait la force d'\ei{IEEEeqnarray}, c'est la capacité de spécifier le
nombre de \emph{colonnes} dans le tableau d'équation. Le plus souvent, cette
spécification sera \verb+{rCl}+, c'est-à-dire trois colonnes dont la première
est alignée à droite, la deuxième centrée et avec un peu plus d'espace autour
d'elle (c'est le sens du \texttt{C} majuscule au lieu de \texttt{c}
minuscule), et la troisième alignée à gauche.
\begin{example}
\begin{IEEEeqnarray}{rCl}
  a & = & b + c 
  \\
  & = & d + e + f + g + h 
  + i + j + k \nonumber\\
  && \negmedspace {} + l + m + n + o 
  \\
  & = & p + q + r + s
\end{IEEEeqnarray}
\end{example}
On peut choisir n'importe quel nombre de colonnes. Par exemple,
\verb+{c}+ donnera une seule colonne dans laquelle toutes les lignes seront
centrées, ou bien \verb+{rCll}+ donnera une quatrième colonne alignée à gauche,
par exemple pour des commentaires. Mieux, en plus de \texttt{l}, \texttt{c},
\texttt{r}, \texttt{L}, \texttt{C}, \texttt{R} pour les entrées en mode mathématique,
on dispose aussi de \texttt{s}, \texttt{t}, \texttt{u} pour des colonnes en
mode texte, respectivement alignées à gauche, centrées ou alignées à droite.
Par ailleurs, on peut ajouter de l'espace entre deux colonnes
avec\footnote{Pour plus de types d'espacement, nous renvoyons à la
  section~\ref{sec:putting-qed-right} et au manuel officiel.} \og \texttt{.}
\fg, \og \texttt{/} \fg et \og \texttt{\string?} \fg en ordre croissant.
Remarquons les espaces autour des signes d'égalité, par rapport au cas
d'utilisation de l'environnement \texttt{eqnarray}.

\subsection{Usages courants}
\label{sec:common-usage}

Nous décrivons ici comment utiliser \texttt{IEEEeqnarray} pour résoudre les
problèmes les plus courants.

Si une ligne et le numéro d'équation se superposent comme dans
\eqref{eq:eqnarrayfautif}, la commande \small
\begin{verbatim}
\IEEEeqnarraynumspace
\end{verbatim} 
\normalsize
permet de résoudre le problème : il suffit de l'ajouter à la fin de la ligne
en question, et l'ensemble de la formule est décalée vers la gauche de la
longueur nécessaire (le décalage dépend de la taille du numéro d'équation).
Par exemple, partant de :
\begin{example}
\begin{IEEEeqnarray}{rCl}
  a & = & b + c 
  \\
  & = & d + e + f + g + h 
  + i + j + k 
  \\
  & = & l + m + n
\end{IEEEeqnarray}
\end{example}
on obtient :
\begin{example}
\begin{IEEEeqnarray}{rCl}
  a & = & b + c 
  \\
  & = & d + e + f + g + h 
  + i + j + k 
  \IEEEeqnarraynumspace\\
  & = & l + m + n.
\end{IEEEeqnarray}
\end{example}

Si le membre de gauche est trop long, \texttt{IEEEeqnarray} propose la
commande \ci{IEEEeqnarraymulticol}, qui fonctionne dans tous les cas,
comme remplacement de \ci{lefteqn}.
\begin{example}
\begin{IEEEeqnarray}{rCl}
  \IEEEeqnarraymulticol{3}{l}{
    a + b + c + d + e + f 
    + g + h
  }\nonumber\\ \quad
  & = & i + j 
  \\
  & = & k + l + m
\end{IEEEeqnarray}
\end{example}
Son usage est identique à celui de la commande \ci{multicolumns} dans
l'environnement \texttt{tabular} : le premier argument \verb+3+ dit qu'il faut
combiner trois colonnes pour n'en former qu'une, et le deuxième argument
\verb+l+ dit que son contenu sera aligné à gauche.

Remarquons qu'en insérant \ci{quad} dans l'exemple précédent, on peut
facilement adapter l'alignement vertical\footnote{Nous pensons qu'un
  cadratin est la distance qui rend le mieux dans la plupart des cas.}
du signe égal, par exemple :
\begin{example}
\begin{IEEEeqnarray}{rCl}
  \IEEEeqnarraymulticol{3}{l}{
    a + b + c + d + e + f 
    + g + h
  }\nonumber\\ \qquad\qquad
  & = & i + j
  \\
  & = & k + l + m
\end{IEEEeqnarray}
\end{example}

Si une formule est découpée en deux ou plusieurs lignes, \LaTeX{}
croit que le signe $+$ ou $-$ au début d'une ligne est un opérateur
unaire (comme dans $-2$) et non binaire (comme dans $2 - 2$). C'est
pourquoi il faut ajouter un groupe vide \verb|{}| avant l'opérateur.
Par exemple, au lieu de
\begin{example}
\begin{IEEEeqnarray}{rCl}
  a & = & b + c 
  \\
  & = & d + e + f + g + h 
  + i + j + k \nonumber\\
  && + l + m + n + o 
  \\
  & = & p + q + r + s
\end{IEEEeqnarray}
\end{example}
il vaut mieux écrire
\begin{example}
\begin{IEEEeqnarray}{rCl}
  a & = & b + c 
  \\
  & = & d + e + f + g + h 
  + i + j + k \nonumber\\
  && \negmedspace {} + l + m + n + o 
  \\
  & = & p + q + r + s
\end{IEEEeqnarray}
\end{example}
\noindent Observez l'espace entre $+$ et $l$ dans les deux cas !

La construction \verb|{} + l| force the signe \verb|+| à être
interprété comme opérateur plutôt que comme signe, et l'espace
indésirable qui le suit entre \verb|{}| and \verb|+| est compensé par
un espace moyen négatif \ci{negmedspace}.

Pour supprimer la numérotation sur une ligne particulière, on
dispose de la commande \ci{nonumber} (ou bien \ci{IEEEnonumber}). Si
un label \verb+\label{...}+ est défini sur cette ligne, il est alors
transmis à la prochaine équation dont la numérotation n'est pas
supprimée. Placez plutôt les labels juste avant le \verb+\\+ à la
fin de la ligne concernée ou avant la fin de la formule. En plus
d'améliorer la lisibilité du code source, ceci évite des erreurs de
compilation quand une commande \ci{IEEEmulticol} se
trouve après la définition du label.

Il existe également une version étoilée de l'environnement, qui
supprime totalement la numérotation. Dans ce cas, on peut ajouter un
numéro d'équation sur une ligne particulière avec
\ci{IEEEyesnumber}.
\begin{example}
\begin{IEEEeqnarray*}{rCl}
  a & = & b + c \\
  & = & d + e \IEEEyesnumber\\
  & = & f + g
\end{IEEEeqnarray*}
\end{example}

On peut également obtenir des numéros de sous-équation avec la
commande \ci{IEEEyessubnumber}.
\begin{example}
\begin{IEEEeqnarray}{rCl}
  a & = & b + c
  \IEEEyessubnumber\\
  & = & d + e
  \nonumber\\
  & = & f + g
  \IEEEyessubnumber
\end{IEEEeqnarray}
\end{example}

\subsection{Tableaux et matrices}
\label{sec:arraymat}

Pour composer des \textbf{tableaux} mathématiques, utilisez l'environnement
\ei{array}. Il fonctionne de manière similaire à l'environnement
\texttt{tabular}. La commande \verb|\\| est utilisée pour séparer les
lignes :
\begin{example}
  \begin{equation*}
    \mathbf{X} =
    \left(
      \begin{array}{ccc}
        x_1 & x_2 & \ldots \\
        x_3 & x_4 & \ldots \\
        \vdots & \vdots & \ddots
      \end{array}
    \right)
  \end{equation*}
\end{example}
%MPG: changed the disposition to help filling the page

L'environnement \ei{array} peut également être utilisé pour imprimer
des fonctions\index{fonctions!définies par morceaux} définies par morceaux en
utilisant \og \verb|.| \fg{} comme délimiteur (invisible) de droite :
\begin{example}
\begin{equation*}
  |x| =
  \left\{
    \begin{array}{rl}
      -x & \text{si } x < 0,\\
      0 & \text{si } x = 0,\\
      x & \text{si } x > 0.
    \end{array}
  \right.
\end{equation*}
\end{example}
%MPG: changed the disposition to help filling the page
L'environnement \ei{cases} d'\package{amsmath} offre une syntaxe
plus simple.
\begin{example}
  \begin{equation*}
    |x| = 
    \begin{cases}
      -x & \text{si } x < 0,\\
      0 & \text{si } x = 0,\\
      x & \text{si } x > 0.
    \end{cases} 
\end{equation*}
\end{example}

\looseness1
L'environnement \ei{array} peut servir à mettre en page des
matrices\index{matrice}, mais \pai{amsmath} fournit une meilleure
solution avec l'environnement \ei{matrix} et ses variantes. Elles sont au
nombre de six (avec des délimiteurs différents) : \ei{matrix} (aucun
délimiteur ), \ei{pmatrix}
$($, \ei{bmatrix} $[$, \ei{Bmatrix} $\{$, \ei{vmatrix} $\vert$ et
\ei{Vmatrix} $\Vert$. Vous n'avez pas à spécifier le nombre de
colonnes comme avec \ei{array}. Leur nombre maximal est de 10 par défaut mais il
est modifiable (bien que ce ne soit pas fréquent d'avoir besoin de 10
colonnes ou plus~!)~:
\begin{example}
\begin{equation*}
  \begin{matrix} 
    1 & 2 \\
    3 & 4 
  \end{matrix} \qquad
  \begin{bmatrix} 
    p_{11} & p_{12} & \ldots 
    & p_{1n} \\
    p_{21} & p_{22} & \ldots 
    & p_{2n} \\
    \vdots & \vdots & \ddots 
    & \vdots \\
    p_{m1} & p_{m2} & \ldots 
    & p_{mn} 
  \end{bmatrix}
\end{equation*}
\end{example}

\section{Espacement en mode mathématique}
\label{sec:math-spacing}

\index{espacement!mathématique}
\index{mathématiques!espaces}

Si l'espacement choisi par \LaTeX{} dans une formule n'est pas
satisfaisant, il peut être ajusté en insérant des commandes
d'espacement. Les plus importantes sont : \ci{,} pour une espace fine
($\frac{3}{18}\:\textrm{quad}$, \demowidth{0.166em}), \ci{:} pour une
espace moyenne ($\frac{4}{18}\:\textrm{quad}$, \demowidth{0.222em}) et
\ci{;} pour une espace grande ($\frac{5}{18}\: \textrm{quad}$,
\demowidth{0.277em}).  L'espace échappée \verb*|\ | crée une espace
moyenne similaire à l'espace entre mots. and \ci{quad}
(\demowidth{1em}) et \ci{qquad} (\demowidth{2em}) produisent des
espaces plus larges.  La largeur d'un \ci{quad}\footnote{Appelé \emph{espace
    cadratin} en français. \NdT} correspond approximativement à la largeur du
caractère \og M \fg{} dans la police courante. 
La commande \verb|\!|\cih{"!} produit une espace fine négative
de $-\frac{3}{18}\:\textrm{quad}$ ($-$\demowidth{0.166em}).

\begin{example}
\begin{equation*}
  \int_1^2 \ln x \mathrm{d}x
  \qquad
  \int_1^2 \ln x \,\mathrm{d}x
\end{equation*}
\end{example}

Remarquez que \og d \fg{} est imprimée en police romaine.
Dans l'exemple suivant, nous définissons une commande \ci{ud} qui
produit \og $\,\mathrm{d}$ \fg{} (remarquez l'espace
\demowidth{0.166em} avant le $\text{d}$), de manière à ne pas avoir à
le saisir à chaque fois. La commande  \ci{newcommand} est placée en
préambule.
%  More on
% \ci{newcommand} in section~\ref{} on page \pageref{}. To Do: Add label and
% reference to "Customising LaTeX" -> "New Commands, Environments and Packages"
% -> "New Commands".
\begin{example}
\newcommand{\ud}{\,\mathrm{d}}

\begin{equation*}
 \int_a^b f(x)\ud x 
\end{equation*}
\end{example}

Lorsque vous utilisez des intégrales multiples, vous constatez que
l'espace entre celles-ci est trop grand. Vous pouvez certes utiliser
\ci{!}, mais \AmS-\LaTeX{} propose un ensemble de commandes pour
réaliser cet ajustement : \ci{iint}, \ci{iiint},
\ci{iiiint} et \ci{idotsint}.

\begin{example}
\newcommand{\ud}{\,\mathrm{d}}

\begin{IEEEeqnarray*}{c}
  \int\int f(x)g(y) 
                  \ud x \ud y \\
  \int\!\!\!\int 
         f(x)g(y) \ud x \ud y \\
  \iint f(x)g(y)  \ud x \ud y 
\end{IEEEeqnarray*}
\end{example}

Reportez-vous au document \texttt{testmath.tex} distribué avec
\AmS-\LaTeX{}, au chapitre 8 de \companion{} ou au chapitre 9 de
\desgraupes{} pour plus de détails.


\subsection{Fantômes\texorpdfstring{\dots}{...}}


Il arrive que \LaTeX{} en fasse un peu trop dans des alignements
verticaux d'indices ou d'exposants. La commande \ci{phantom} permet
de réserver de l'espace pour des caractères qui ne seront pas
imprimés, comme le montrent les exemples suivants :
\begin{example}
\begin{equation*}
{}^{14}_{6}\text{C}
\qquad \text{à comparer à} \qquad
{}^{14}_{\phantom{1}6}\text{C}
\end{equation*}
\end{example}

Si vous souhaitez mettre en forme des isotopes comme dans l'exemple
ci-avant, l'extension \pai{mhchem} dédiée aux formules chimiques peut
vous y aider.


\section{Manipuler les polices mathématiques}\label{sec:fontsz}
Plusieurs polices mathématiques sont listées au tableau~\ref{mathalpha}
page \pageref{mathalpha}.
\begin{example}
 $\Re \qquad
  \mathcal{R} \qquad
  \mathfrak{R} \qquad
  \mathbb{R} \qquad $  
\end{example}
Les deux dernières nécessitent \pai{amssymb} ou \pai{amsfonts}.

Parfois, il peut être nécessaire d'indiquer à \LaTeX{} la taille
de fonte désirée. En mode mathématique, cette taille est ajustable
avec les quatre commandes~:
\begin{flushleft}
\ci{displaystyle}~($\displaystyle 123$),
 \ci{textstyle}~($\textstyle 123$), 
\ci{scriptstyle}~($\scriptstyle 123$) et
\ci{scriptscriptstyle}~($\scriptscriptstyle 123$).
\end{flushleft}

Si $\sum$ est placé dans une fraction, il sera imprimé dans le style \og
en-ligne \fg à
moins d'indiquer à \LaTeX{} le contraire :
\begin{example}
\begin{equation*}
 P = \frac{\displaystyle{
   \sum_{i=1}^n (x_i-x)
   (y_i-y)}}
   {\displaystyle{\left[
   \sum_{i=1}^n(x_i-x)^2
   \sum_{i=1}^n(y_i-y)^2
   \right]^{1/2}}}
\end{equation*}
\end{example}

Changer de style modifie également la façon dont les limites et les
grands opérateurs sont affichés.
 
% This is not a math accent, and no maths book would be set this way.
% mathop gets the spacing right.


\subsection{Symboles gras}
\index{symboles!gras}

Il est relativement ardu d'obtenir des symboles gras avec \LaTeX{} ;
cela est sans doute fait exprès car les typographes amateurs ont
tendance à en abuser. La commande de changement de graisse
\verb|\mathbf| permet d'obtenir des caractères gras, mais romains
(donc droits) alors que les symboles mathématiques sont normalement en
italique. De plus elle ne fonctionne pas sur les minuscules
grecques. Il y a bien une commande \ci{boldmath}, mais \emph{elle ne
  peut être utilisée qu'en dehors du mode mathématique}. Cependant
elle fonctionne aussi pour les symboles :
\begin{example}
$\mu, M \qquad 
\mathbf{\mu}, \mathbf{M}$
\qquad \boldmath{$\mu, M$}
\end{example}

L'extension \pai{amsbsy} (appelée par \pai{amsmath}) ainsi que
l'extenstion \pai{bm} dans le paquet \texttt{tools} simplifient
beaucoup ce problème puisqu'ils fournissent une commande
\ci{boldsymbol} :

\begin{example}
$\mu, M \qquad
\boldsymbol{\mu}, \boldsymbol{M}$
\end{example}


\section{Théorèmes, lemmes, etc.}

En rédigeant des documents mathématiques, on a besoin d'un moyen de
présenter des lemmes, des définitions, des axiomes et d'autres
structures similaires :
\begin{lscommand}
\ci{newtheorem}\verb|{|\emph{nom}\verb|}[|\emph{compteur}\verb|]{|%
         \emph{texte}\verb|}[|\emph{section}\verb|]|
\end{lscommand}
L'argument \emph{nom} est un mot-clef utilisé pour identifier le
théorème. L'argument \emph{texte} définit le nom réel du théorème tel
qu'il sera imprimé dans le document final.

Les arguments entre crochets sont optionnels. Ils servent à
indiquer la numérotation à utiliser sur le théorème. Utilisez
le \emph{compteur} pour indiquer le \emph{nom} d'un théorème déjà
déclaré. Le nouveau théorème sera alors numéroté dans la même
séquence. Avec \emph{section} vous indiquez dans quel niveau de
sectionnement vous voulez numéroter votre théorème.

Après avoir exécuté \ci{newtheorem} dans le préambule de votre
document, vous pouvez utiliser la commande suivante :

\begin{code}
\verb|\begin{|\emph{nom}\verb|}[|\emph{texte}\verb|]|\\
Ceci est mon premier théorème\\
\verb|\end{|\emph{nom}\verb|}|     
\end{code}

L'extension \pai{amsthm} (qui fait partie d'\AmS-LaTeX) met à
disposition la commande
\ci{theoremstyle}\verb|{|\emph{style}\verb|}| offrant un choix de type de
théorème parmi trois styles
préféfinis : \texttt{definition} (titre gras, corps romain),
\texttt{plain} (titre gras, corps italique) or \texttt{remark} (titre
italique, corps romain).

%SC: ah, the initial translation missed the subtle sarcasm here
Voilà pour la théorie. Les exemples qui suivent devraient lever tout
doute et montrer clairement que la commande \verb|\newtheorem| est
trop complexe à comprendre.

% actually define things
\theoremstyle{definition} \newtheorem{loi}{loi}
\theoremstyle{plain}      \newtheorem{decret}[loi]{Décret}
\theoremstyle{remark}     \newtheorem*{lechef}{Le chef}

D'abord définissez les théorèmes :

\begin{verbatim}
\theoremstyle{definition} \newtheorem{loi}{loi}
\theoremstyle{plain}      \newtheorem{decret}[loi]{Décret}
\theoremstyle{remark}     \newtheorem*{lechef}{Le chef}
\end{verbatim}

\begin{example}
\begin{loi} \label{chef}
Le chef a raison.
\end{loi}
\begin{decret}[Important]
Le chef a toujours raison,
voir la loi~\ref{chef}.
\end{decret}
\begin{lechef}
Et si le chef a tort, se référer
à la loi~\ref{chef}.
\end{lechef}
\end{example}


L'environnement \og decret \fg{} utilise le même compteur que l'environnement
\og loi \fg{}, donc il obtient un numéro dans la même
séquence que les autres \og lois \fg{}. L'argument entre crochets permet
de spécifier un titre ou quelque chose de ce genre pour l'environnement.
\begin{example}
\newtheorem{mur}{Murphy}[section]
\begin{mur} Tout ce qui peut 
aller mal ira mal.\end{mur}
\end{example}

Les environnements \og Murphy \fg{} sont numérotés à l'intérieur de la section
en cours. On aurait pu utiliser un autre niveau tel que \texttt{chapter}
ou \texttt{subsection}. 

Si vous voulez personnaliser vos théorèmes au point près, l'extension
\pai{ntheorem} vous offrira la pléthore d'options dont vous avez
besoin.

\subsection{Preuves et symbole de fin de preuve}
\label{sec:putting-qed-right}

L'extension \pai{amsthm} fournit aussi l'environnement de preuve
\ei{proof}.

\begin{example}
\begin{proof}
 Trivial, utilisez
 \begin{equation*}
   E=mc^2.
 \end{equation*}
\end{proof}
\end{example}

La commande \ci{qedhere} permet de déplacer le symbole de fin de
preuve (CQFD) pour les cas où il finirait seul sur une ligne.

\begin{example}
\begin{proof}
 Trivial, utilisez
 \begin{equation*}
   E=mc^2. \qedhere
 \end{equation*}
\end{proof}
\end{example}

Malheureusement, cette correction ne fonctionne pas avec l'environnement
\ei{IEEEeqnarray}.
\begin{example}
\begin{proof}
  Voici une preuve qui termine
  par un alignement d'équations.
  \begin{IEEEeqnarray*}{rCl}
    a & = & b + c \\
    & = & d + e. \qedhere
  \end{IEEEeqnarray*}
\end{proof}
\end{example}
\noindent
La raison provient de la structure interne d'\ei{IEEEeqnarray}, qui place
systématiquement une colonne invisible de chaque côté de l'équation, qui
contiennent seulement des espaces étirables, de façon à ce que le tableau
d'équations soit correctement centré. Il faudrait en fait placer le
\ci{qedhere} à l'extérieur de cet espace étirable, mais ce n'est pas possible
car ces colonnes sont invisibles pour l'utilisateur.

Il y a une solution très simple : définir ces colonnes étirables explicitement !
\begin{example}
\begin{proof}
  Voici une preuve qui termine
  par un alignement d'équations.
  \begin{IEEEeqnarray*}{+rCl+x*}
    a & = & b + c \\
    & = & d + e. & \qedhere
  \end{IEEEeqnarray*}
\end{proof}
\end{example}
\noindent
Ici, le \verb=+= dans \verb={+rCl+x*}= indique un espace étirable : un à
gauche de l'équation qui, s'il n'était pas présent, serait ajouté
d'office par \texttt{IEEEeqnarray}, et un à droite de l'équation. Mais
cette fois à droite, \emph{après} cette colonne étirable, nous ajoutons une
colonne vide \verb+x+, qui ne sera utilisée que sur la dernière ligne, si
la commande \ci{qedhere} est utilisée. Enfin, nous ajoutons un \verb+*+ : c'est un
espace sans épaisseur, qui empêche \texttt{IEEEeqnarray} d'ajouter un autre
espace \verb=+= indésirable.

Dans le cas d'équations numérotées, le problème est similaire.
Comparons
\begin{example}
\begin{proof}
  Voici une preuve qui termine
  par une équation numérotée.
  \begin{equation}
    a = b + c.
  \end{equation}
\end{proof}
\end{example}
\noindent
avec
\begin{example}
\begin{proof}
  Voici une preuve qui termine
  par une équation numérotée.
  \begin{equation}
    a = b + c. \qedhere
  \end{equation}
\end{proof}
\end{example}
\noindent
Vous remarquerez que dans la deuxième version, qui est correcte, le symbole
$\Box$ est bien plus proche de l'équation que dans la première.

De façon analogue, la bonne manière de placer le symbole de fin de preuve à la
fin d'un alignements d'équations est la suivante.
\begin{example}
\begin{proof}
  Voici une preuve qui termine
  par un alignement d'équations.
  \begin{IEEEeqnarray}{+rCl+x*}
    a & = & b + c \\
    & = & d + e. \\
    &&& \qedhere\nonumber
  \end{IEEEeqnarray}
\end{proof}
\end{example}
\noindent
par opposition à
\begin{example}
\begin{proof}
  Voici une preuve qui termine
  par un alignement d'équations.
  \begin{IEEEeqnarray}{rCl}
    a & = & b + c \\
    & = & d + e.
  \end{IEEEeqnarray}
\end{proof}
\end{example}

\endinput

% Local Variables:
% TeX-master: "lshort"
% mode: latex
% mode: flyspell
% End:
